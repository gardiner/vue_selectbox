.selectbox
    .inputframe(v-on:click="activate" v-on:focus="activate" tabindex="0")
        %span.value(v-for="item in value" tabindex="-1")
            .icon.clear.active(v-on:click="function(e) { unset_value(item); e.stopPropagation(); return false; }")
            %slot(name="selected" :item="item")
                {{ pretty(item) }}
        %span.placeholder(v-if="!has_value") {{ is_open ? '&nbsp;' : safe_placeholder }}
        .icon.open(:class="{active: !is_open}")

    .candidates(v-if="is_open")
        .input(v-if="config.show_filter_input")
            %input{"type"=>"text", "v-on:keydown.up"=>"prev", "v-on:keydown.down"=>"next", "v-on:keydown.enter.prevent"=>"select", "v-on:keydown.esc"=>"close", "v-model"=>"input", "autocomplete"=>"off"}
            .icon.add(:class="{active: is_add_visible}" v-on:click="add_candidate")
            .icon.clear(:class="{active: input}" v-on:click="close")

        %ul(v-if="filtered_candidates.length > 0")
            %li(v-for="c, $index in filtered_candidates" v-bind:class="{selected: is_selected(c), active: (current === $index)}" v-on:mouseenter="set_current($index)" v-on:click="select" v-bind:title="pretty(c)")
                %slot(name="candidate" :item="c")
                    {{ pretty(c) }}
