!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.vue_selectbox=t():e.vue_selectbox=t()}(self,(()=>(()=>{"use strict";var e={730:(e,t,i)=>{i.d(t,{Z:()=>s});const s='<div class="vue_selectbox" v-bind:class="{disabled: disabled}"><div class="inputframe" v-on:click="activate" v-on:focus="activate" tabindex="0"><template v-if="!has_value"><span class="placeholder">{{ is_open || disabled ? "&nbsp;" : safe_placeholder }}</span></template><template v-else-if="config.combine_all &amp;&amp; is_multiple &amp;&amp; is_all_selected"><span class="value"><div class="icon clear active" v-if="!disabled" v-on:click="function(e) { unset_all(); e.stopPropagation(); return false; }"></div> {{ safe_all_label }}</span></template><template v-else="v-else"><span class="value" v-for="item in value" tabindex="-1" v-bind:class="{undeselectable: !is_deselectable(item)}"><div class="icon clear active" v-if="!disabled &amp;&amp; is_deselectable(item)" v-on:click="function(e) { unset_value(item); e.stopPropagation(); return false; }"></div><slot name="selected" :item="item"><slot name="candidate" :item="item">{{ pretty(item) }}</slot></slot></span></template><div class="icon open" :class="{active: !is_open &amp;&amp; !disabled}"></div></div><div class="candidates" v-if="is_open &amp;&amp; !disabled"><div class="input" v-if="config.show_filter_input"><input type="text" :placeholder="config.search_placeholder" v-model="input" v-on:keydown.up="prev" v-on:keydown.down="next" v-on:keydown.enter.prevent="select" v-on:keydown.esc="close" autocomplete="off"/><div class="icon add" :class="{active: is_add_visible}" v-on:click="add_candidate"></div><div class="icon clear" :class="{active: input}" v-on:click="close"></div></div><ul v-if="filtered_candidates.length &gt; 0"><li class="all_items" v-if="is_multiple &amp;&amp; config.allow_select_all" v-on:mouseenter="set_current(false)" v-on:click="select_filtered" v-bind:class="{disabled: is_all_selected,}">{{ safe_all_label }}â€¦</li><li v-for="c, $index in filtered_candidates" v-bind:class="{selected: is_selected(c), active: (current === $index), deselectable: config.allow_deselect_from_list &amp;&amp; is_deselectable(c), disabled: !is_selectable(c)}" v-on:mouseenter="set_current($index)" v-on:mouseup="select" v-bind:title="pretty(c)"><slot name="candidate" :item="c">{{ pretty(c) }}</slot></li></ul></div></div>'},31:(e,t,i)=>{function s(e){return Array.prototype.slice.call(e)}e.exports={template:i(730).Z,props:["candidates","placeholder","all_label","model","label","multiple","disabled","options"],model:{prop:"model",event:"update"},data:function(){return{is_open:!1,current:!1,value:[],input:""}},computed:{config:function(){var e,t={show_filter_input:!0,reset_input_after_add:!0,allow_adding:!1,allow_deselect_from_list:!1,close_after_select:!this.multiple,close_after_add:!this.multiple,close_after_deselect:!0,add_on_select:!0,allow_select_all:!0,combine_all:!1,is_selectable:null,is_deselectable:null,search_placeholder:null};for(e in this.options)Object.prototype.hasOwnProperty.call(this.options,e)&&(t[e]=this.options[e]);return t},filtered_candidates:function(){var e=this;return e.input&&e.candidates?e.candidates.filter((function(t){var i=e.pretty(t)||"",s=e.input.toLowerCase().replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return i.toString().toLowerCase().match(s)})):e.candidates},has_value:function(){return this.value&&this.value.length},is_multiple:function(){return!!this.multiple},is_all_selected:function(){var e,t=this;if(t.is_multiple&&t.candidates&&t.candidates.length){for(e=0;e<t.candidates.length;e++)if(!t.is_selected(t.candidates[e]))return!1;return!0}},is_add_visible:function(){return this.input&&this.config.allow_adding},safe_placeholder:function(){return this.placeholder||"Search..."},safe_all_label:function(){return this.all_label||"All items"}},mounted:function(){var e=this;$(document).on("click close_selectboxes",(function(t){$(e.$el).has(t.target).length||e.close()}))},watch:{model:{handler:function(e){this.is_multiple?this.value=e?s(e):[]:this.value=e?[e]:null},immediate:!0}},methods:{activate:function(e){if(!this.disabled)return $(document).trigger("close_selectboxes"),!e||13!==e.keyCode&&27!==e.keyCode?(this.is_open=!0,this.focus(),!1):void 0},focus:function(){var e=this;this.disabled||window.setTimeout((function(){$(e.$el).find("input").focus()}))},close:function(){this.is_open=!1,this.current=!1,this.input=null},set_current:function(e){var t=this.filtered_candidates.length,i=this.get_by_index(e),s=this.is_selected(i),l=this.is_deselectable(i),n=this.is_selectable(i);!1!==e&&(!s||l&&this.config.allow_deselect_from_list)&&n?this.current=(e+t)%t:this.current=!1,t>1&&this.check_scroll()},check_scroll:function(){var e=$(this.$el).find(".candidates ul"),t=e.children().eq(this.current),i=e.outerHeight(),s=e.scrollTop(),l=s+i,n=s+t.position().top,a=n+t.outerHeight();a>l?e.scrollTop(a-i):n<s&&e.scrollTop(n)},get_by_index:function(e){var t=this.filtered_candidates.length;return this.filtered_candidates[(e+t)%t]},find_next:function(e){var t,i=this.filtered_candidates.length;for(t=!1===this.current?e>0?0:-1:this.current+e;this.is_selected(this.get_by_index(t))&&t<2*i&&t>-2*i;)t+=e;return t},next:function(){this.set_current(this.find_next(1))},prev:function(){this.set_current(this.find_next(-1))},select:function(){var e;!1!==this.current&&this.filtered_candidates.length?(e=this.filtered_candidates[this.current],this.is_selected(e)?this.config.allow_deselect_from_list&&this.unset_value(e):this.set_value(e),this.config.close_after_select?this.close():this.focus()):this.config.add_on_select&&this.add_candidate()},select_filtered:function(){var e=this;e.filtered_candidates.forEach((function(t){!e.is_selected(t)&&e.is_selectable(t)&&e.value.push(t)})),e.$emit("update",e.value),e.close()},set_value:function(e){this.config.reset_input_after_add&&(this.input=""),this.is_selectable(e)&&(this.is_multiple?(this.value.push(e),this.$emit("update",this.value)):(this.value=e?[e]:null,this.$emit("update",e)))},unset_value:function(e){this.is_deselectable(e)&&(this.is_multiple?(this.value=function(e,t){var i=s(e);return Array.prototype.splice.call(i,i.indexOf(t),1),i}(this.value,e),this.$emit("update",this.value)):(this.value=null,this.$emit("update",this.value)),!this.has_value&&this.config.close_after_deselect?this.close():this.focus())},unset_all:function(){this.value=this.is_multiple?[]:null,this.$emit("update",this.value),!this.has_value&&this.config.close_after_deselect?this.close():this.focus()},pretty:function(e){return"function"===$.type(this.label)?e?this.label.call(null,e):void 0:"string"===$.type(this.label)?e?e[this.label]:void 0:e},is_selectable:function(e){return!this.config.is_selectable||this.config.is_selectable.call(this,e)},is_deselectable:function(e){return!this.config.is_deselectable||this.config.is_deselectable.call(this,e)},is_selected:function(e){return this.value&&-1!==this.value.indexOf(e)},add_candidate:function(){this.config.allow_adding&&this.input&&(this.$emit("add",this.input),this.config.close_after_add?this.close():this.input=null)}}}}},t={};function i(s){var l=t[s];if(void 0!==l)return l.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,i),n.exports}return i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(31)})()));